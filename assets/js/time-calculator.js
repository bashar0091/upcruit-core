var database = {
	"group":{
            "IT": {
                "Software Engineer": {
                    "West Sussex":"45",
                    "East Sussex":"43",
                    "Kent":"42",
                    "Surrey":"58",
                    "Greater London":"72",
                    "Essex":"35",
                    "Herts":"32",
                    "Bucks":"34",
                    "Berkshire":"31",
                    "Hamshire":"41",
                    },
                "Frontend Developer": {
                    "West Sussex":"34",
                    "East Sussex":"32",
                    "Kent":"33",
                    "Surrey":"31",
                    "Greater London":"54",
                    "Essex":"32",
                    "Herts":"31",
                    "Bucks":"32",
                    "Berkshire":"30",
                    "Hamshire":"43",
                    },
                "Backend Developer": {
                    "West Sussex":"30",
                    "East Sussex":"28",
                    "Kent":"32",
                    "Surrey":"33",
                    "Greater London":"58",
                    "Essex":"31",
                    "Herts":"27",
                    "Bucks":"25",
                    "Berkshire":"23",
                    "Hamshire":"34",
                    },
                "Full Stack Developer": {
                    "West Sussex":"37",
                    "East Sussex":"35",
                    "Kent":"32",
                    "Surrey":"33",
                    "Greater London":"68",
                    "Essex":"32",
                    "Herts":"29",
                    "Bucks":"30",
                    "Berkshire":"31",
                    "Hamshire":"35",
                    },
                "Application Support Engineer": {
                    "West Sussex":"36",
                    "East Sussex":"31",
                    "Kent":"34",
                    "Surrey":"33",
                    "Greater London":"65",
                    "Essex":"31",
                    "Herts":"28",
                    "Bucks":"27",
                    "Berkshire":"25",
                    "Hamshire":"32",
                    },
                "IT Support Engineer": {
                    "West Sussex":"55",
                    "East Sussex":"53",
                    "Kent":"52",
                    "Surrey":"50",
                    "Greater London":"75",
                    "Essex":"51",
                    "Herts":"50",
                    "Bucks":"49",
                    "Berkshire":"48",
                    "Hamshire":"52",
                    },
                "Software Tester": {
                    "West Sussex":"50",
                    "East Sussex":"51",
                    "Kent":"50",
                    "Surrey":"53",
                    "Greater London":"74",
                    "Essex":"52",
                    "Herts":"48",
                    "Bucks":"46",
                    "Berkshire":"45",
                    "Hamshire":"51",
                    },
                "QA Engineer": {
                    "West Sussex":"33",
                    "East Sussex":"32",
                    "Kent":"32",
                    "Surrey":"33",
                    "Greater London":"55",
                    "Essex":"32",
                    "Herts":"31",
                    "Bucks":"29",
                    "Berkshire":"30",
                    "Hamshire":"32",
                    },
                "Web Developer": {
                    "West Sussex":"44",
                    "East Sussex":"40",
                    "Kent":"43",
                    "Surrey":"44",
                    "Greater London":"76",
                    "Essex":"41",
                    "Herts":"42",
                    "Bucks":"40",
                    "Berkshire":"42",
                    "Hamshire":"42",
                    },
                "Solution Architect": {
                    "West Sussex":"23",
                    "East Sussex":"21",
                    "Kent":"22",
                    "Surrey":"24",
                    "Greater London":"45",
                    "Essex":"20",
                    "Herts":"21",
                    "Bucks":"20",
                    "Berkshire":"20",
                    "Hamshire":"22",
                    },
                "Technical Architect": {
                    "West Sussex":"26",
                    "East Sussex":"24",
                    "Kent":"25",
                    "Surrey":"24",
                    "Greater London":"48",
                    "Essex":"21",
                    "Herts":"22",
                    "Bucks":"20",
                    "Berkshire":"21",
                    "Hamshire":"25",
                    },
                "Microsoft Tech Engineer": {
                    "West Sussex":"31",
                    "East Sussex":"29",
                    "Kent":"28",
                    "Surrey":"29",
                    "Greater London":"56",
                    "Essex":"28",
                    "Herts":"27",
                    "Bucks":"25",
                    "Berkshire":"26",
                    "Hamshire":"28",
                    },
            },
			"Sales": {
				"Account Manager": {
					"West Sussex":"43",
					"East Sussex":"41",
					"Kent":"42",
					"Surrey":"42",
					"Greater London":"74",
					"Essex":"41",
					"Herts":"40",
					"Bucks":"39",
					"Berkshire":"38",
					"Hamshire":"41",
					},
				"New Business Development Manager": {
					"West Sussex":"64",
					"East Sussex":"62",
					"Kent":"63",
					"Surrey":"66",
					"Greater London":"103",
					"Essex":"62",
					"Herts":"61",
					"Bucks":"60",
					"Berkshire":"61",
					"Hamshire":"63",
					},
				"Customer Service Assistant": {
					"West Sussex":"72",
					"East Sussex":"75",
					"Kent":"74",
					"Surrey":"75",
					"Greater London":"115",
					"Essex":"72",
					"Herts":"71",
					"Bucks":"70",
					"Berkshire":"70",
                    "Hamshire":"75",
					},
				"Field Sales Executive": {
					"West Sussex":"43",
					"East Sussex":"47",
					"Kent":"45",
					"Surrey":"42",
					"Greater London":"74",
					"Essex":"41",
					"Herts":"45",
					"Bucks":"46",
					"Berkshire":"44",
					"Hamshire":"46",
					},
				"Sales Executive": {
					"West Sussex":"63",
					"East Sussex":"60",
					"Kent":"63",
					"Surrey":"65",
					"Greater London":"135",
					"Essex":"66",
					"Herts":"64",
					"Bucks":"63",
					"Berkshire":"60",
					"Hamshire":"61",
					},
				"Telesales Executive": {
					"West Sussex":"72",
					"East Sussex":"68",
					"Kent":"69",
					"Surrey":"67",
					"Greater London":"142",
					"Essex":"65",
					"Herts":"66",
					"Bucks":"64",
					"Berkshire":"65",
					"Hamshire":"68",
					}
			},
			"Marketing": {
				"Advertising Executive": {
					"West Sussex":"68",
					"East Sussex":"63",
					"Kent":"65",
					"Surrey":"66",
					"Greater London":"112",
					"Essex":"65",
					"Herts":"66",
					"Bucks":"67",
					"Berkshire":"65",
					"Hamshire":"67",
					},
				"Campaign Manager": {
					"West Sussex":"23",
					"East Sussex":"21",
					"Kent":"22",
					"Surrey":"23",
					"Greater London":"52",
					"Essex":"21",
					"Herts":"22",
					"Bucks":"20",
					"Berkshire":"21",
					"Hamshire":"22",
					},
				"Commercial Manager": {
					"West Sussex":"22",
					"East Sussex":"19",
					"Kent":"20",
					"Surrey":"21",
					"Greater London":"53",
					"Essex":"22",
					"Herts":"21",
					"Bucks":"20",
					"Berkshire":"22",
					"Hamshire":"23",
					},
				"Digital Marketing Executive": {
					"West Sussex":"65",
					"East Sussex":"68",
					"Kent":"67",
					"Surrey":"65",
					"Greater London":"102",
					"Essex":"66",
					"Herts":"64",
					"Bucks":"65",
					"Berkshire":"67",
					"Hamshire":"69",
					},
				"Editor": {
					"West Sussex":"21",
					"East Sussex":"22",
					"Kent":"20",
					"Surrey":"21",
					"Greater London":"45",
					"Essex":"18",
					"Herts":"22",
					"Bucks":"20",
					"Berkshire":"19",
					"Hamshire":"22",
					},
				"Editorial Assistant": {
					"West Sussex":"37",
					"East Sussex":"35",
					"Kent":"36",
					"Surrey":"37",
					"Greater London":"67",
					"Essex":"35",
					"Herts":"34",
					"Bucks":"33",
					"Berkshire":"35",
					"Hamshire":"37",
					},
				"Marketing Manager": {
					"West Sussex":"38",
					"East Sussex":"33",
					"Kent":"36",
					"Surrey":"35",
					"Greater London":"64",
					"Essex":"33",
					"Herts":"31",
					"Bucks":"32",
					"Berkshire":"33",
					"Hamshire":"36",
					},
				"PR Assistant": {
					"West Sussex":"68",
					"East Sussex":"64",
					"Kent":"65",
					"Surrey":"63",
					"Greater London":"89",
					"Essex":"63",
					"Herts":"64",
					"Bucks":"63",
					"Berkshire":"66",
					"Hamshire":"65",
					},
				"PR Manager": {
					"West Sussex":"22",
					"East Sussex":"21",
					"Kent":"22",
					"Surrey":"23",
					"Greater London":"50",
					"Essex":"22",
					"Herts":"21",
					"Bucks":"20",
					"Berkshire":"21",
					"Hamshire":"23",
					},
				"Publishing Director": {
					"West Sussex":"15",
					"East Sussex":"16",
					"Kent":"15",
					"Surrey":"16",
					"Greater London":"32",
					"Essex":"14",
					"Herts":"13",
					"Bucks":"14",
					"Berkshire":"13",
					"Hamshire":"15",
					},
				"Social Medial Expert": {
					"West Sussex":"44",
					"East Sussex":"47",
					"Kent":"45",
					"Surrey":"44",
					"Greater London":"70",
					"Essex":"43",
					"Herts":"44",
					"Bucks":"45",
					"Berkshire":"43",
					"Hamshire":"46",
					},
			},
			"HR":{
				"Head of Recruitment": {
					"West Sussex":"147",
					"East Sussex":"132",
					"Kent":"134",
					"Surrey":"136",
					"Greater London":"203",
					"Essex":"145",
					"Herts":"133",
					"Bucks":"141",
					"Berkshire":"140",
					"Hamshire":"146",
					},
				"HR Administrator": {
					"West Sussex":"235",
					"East Sussex":"238",
					"Kent":"234",
					"Surrey":"233",
					"Greater London":"457",
					"Essex":"233",
					"Herts":"236",
					"Bucks":"234",
					"Berkshire":"233",
					"Hamshire":"235",
					},
				"HR Advisor": {
					"West Sussex":"174",
					"East Sussex":"177",
					"Kent":"176",
					"Surrey":"176",
					"Greater London":"268",
					"Essex":"178",
					"Herts":"176",
					"Bucks":"175",
					"Berkshire":"176",
					"Hamshire":"175",
					},
				"HR Assistant": {
					"West Sussex":"225",
					"East Sussex":"224",
					"Kent":"224",
					"Surrey":"222",
					"Greater London":"475",
					"Essex":"213",
					"Herts":"221",
					"Bucks":"222",
					"Berkshire":"223",
					"Hamshire":"221",
					},
				"HR Business Partner": {
					"West Sussex":"324",
					"East Sussex":"321",
					"Kent":"318",
					"Surrey":"316",
					"Greater London":"585",
					"Essex":"321",
					"Herts":"309",
					"Bucks":"316",
					"Berkshire":"317",
					"Hamshire":"327",
					},
				"HR Manager": {
					"West Sussex":"152",
					"East Sussex":"143",
					"Kent":"142",
					"Surrey":"148",
					"Greater London":"205",
					"Essex":"150",
					"Herts":"147",
					"Bucks":"145",
					"Berkshire":"146",
					"Hamshire":"151",
					},
				"Talent Aqucition Specialist": {
					"West Sussex":"462",
					"East Sussex":"455",
					"Kent":"450",
					"Surrey":"460",
					"Greater London":"982",
					"Essex":"457",
					"Herts":"458",
					"Bucks":"454",
					"Berkshire":"460",
					"Hamshire":"461",
					},
				"Sourcing Specialist": {
					"West Sussex":"273",
					"East Sussex":"271",
					"Kent":"272",
					"Surrey":"275",
					"Greater London":"689",
					"Essex":"268",
					"Herts":"265",
					"Bucks":"255",
					"Berkshire":"268",
					"Hamshire":"270",
					},
				"CIPD Personnel Officer ": {
					"West Sussex":"78",
					"East Sussex":"79",
					"Kent":"75",
					"Surrey":"77",
					"Greater London":"150",
					"Essex":"76",
					"Herts":"74",
					"Bucks":"73",
					"Berkshire":"75",
					"Hamshire":"77",
					},
			},
			"Administration": {
				"Office Administrator": {
					"West Sussex":"267",
					"East Sussex":"265",
					"Kent":"267",
					"Surrey":"265",
					"Greater London":"545",
					"Essex":"263",
					"Herts":"264",
					"Bucks":"266",
					"Berkshire":"267",
					"Hamshire":"266",
					},
				"Facilities Manager": {
					"West Sussex":"26",
					"East Sussex":"23",
					"Kent":"25",
					"Surrey":"24",
					"Greater London":"50",
					"Essex":"23",
					"Herts":"25",
					"Bucks":"24",
					"Berkshire":"23",
					"Hamshire":"25",
					},
				"Operation Manager": {
					"West Sussex":"113",
					"East Sussex":"109",
					"Kent":"112",
					"Surrey":"111",
					"Greater London":"168",
					"Essex":"110",
					"Herts":"112",
					"Bucks":"108",
					"Berkshire":"107",
					"Hamshire":"113",
					},
				"Office Assistant": {
					"West Sussex":"163",
					"East Sussex":"127",
					"Kent":"129",
					"Surrey":"132",
					"Greater London":"210",
					"Essex":"126",
					"Herts":"122",
					"Bucks":"115",
					"Berkshire":"126",
					"Hamshire":"141",
					},
				"Personal Assistant": {
					"West Sussex":"44",
					"East Sussex":"46",
					"Kent":"44",
					"Surrey":"43",
					"Greater London":"75",
					"Essex":"43",
					"Herts":"42",
					"Bucks":"41",
					"Berkshire":"40",
					"Hamshire":"43",
					},
				"Receptionist": {
					"West Sussex":"205",
					"East Sussex":"210",
					"Kent":"203",
					"Surrey":"201",
					"Greater London":"534",
					"Essex":"194",
					"Herts":"185",
					"Bucks":"190",
					"Berkshire":"200",
					"Hamshire":"202",
					},
				"Virtual Assistant": {
					"West Sussex":"96",
					"East Sussex":"95",
					"Kent":"94",
					"Surrey":"94",
					"Greater London":"235",
					"Essex":"93",
					"Herts":"90",
					"Bucks":"89",
					"Berkshire":"93",
					"Hamshire":"94",
					},
			},
			"Retail": {
				"Team Leader": {
					"West Sussex":"31",
					"East Sussex":"30",
					"Kent":"32",
					"Surrey":"31",
					"Greater London":"75",
					"Essex":"32",
					"Herts":"31",
					"Bucks":"30",
					"Berkshire":"30",
					"Hamshire":"32",
					},
				"Store Assistant": {
					"West Sussex":"59",
					"East Sussex":"61",
					"Kent":"62",
					"Surrey":"62",
					"Greater London":"178",
					"Essex":"60",
					"Herts":"56",
					"Bucks":"57",
					"Berkshire":"58",
					"Hamshire":"60",
					},
				"Store Manager": {
					"West Sussex":"32",
					"East Sussex":"29",
					"Kent":"27",
					"Surrey":"28",
					"Greater London":"56",
					"Essex":"23",
					"Herts":"27",
					"Bucks":"29",
					"Berkshire":"31",
					"Hamshire":"33",
					},
				"Retail Supervisor": {
					"West Sussex":"54",
					"East Sussex":"52",
					"Kent":"54",
					"Surrey":"52",
					"Greater London":"88",
					"Essex":"51",
					"Herts":"50",
					"Bucks":"52",
					"Berkshire":"53",
					"Hamshire":"55",
					},
			},
			"Healthcare": {
				"Care Worker": {
					"West Sussex":"30",
					"East Sussex":"23",
					"Kent":"32",
					"Surrey":"33",
					"Greater London":"65",
					"Essex":"28",
					"Herts":"25",
					"Bucks":"24",
					"Berkshire":"25",
					"Hamshire":"28",
					},
				"Care Assistant - Bank": {
					"West Sussex":"20",
					"East Sussex":"19",
					"Kent":"21",
					"Surrey":"22",
					"Greater London":"59",
					"Essex":"18",
					"Herts":"17",
					"Bucks":"20",
					"Berkshire":"19",
					"Hamshire":"22",
					},
				"Care Home Manager": {
					"West Sussex":"15",
					"East Sussex":"11",
					"Kent":"12",
					"Surrey":"13",
					"Greater London":"45",
					"Essex":"10",
					"Herts":"11",
					"Bucks":"13",
					"Berkshire":"15",
					"Hamshire":"14",
					},
				"Socialcare Worker": {
					"West Sussex":"24",
					"East Sussex":"21",
					"Kent":"19",
					"Surrey":"20",
					"Greater London":"55",
					"Essex":"22",
					"Herts":"23",
					"Bucks":"24",
					"Berkshire":"21",
					"Hamshire":"23",
					},
				"Domestic Care Assistant": {
					"West Sussex":"18",
					"East Sussex":"16",
					"Kent":"17",
					"Surrey":"19",
					"Greater London":"35",
					"Essex":"17",
					"Herts":"15",
					"Bucks":"14",
					"Berkshire":"18",
					"Hamshire":"19",
					},
			},
	}
}


var groups = database.group;
var jobTypeoutput = "";
var jobType = jQuery("#jobType");
var jobName = jQuery("#jobName");
var jobLocated = jQuery("#jobLocated");
var applicationNumber = jQuery("#applicationNumber");
var eachCv = jQuery("#eachCv");
var timeSaved = jQuery("#timeSaved");

// generate the initial job type select element
jobTypeoutput += "<select class='form-select py-3 rounded-0 focus-0'>";
for (var jobTitle in groups) {
    jobTypeoutput += `<option value="${jobTitle}">` + jobTitle + "</option>";
}
jobTypeoutput += "</select>";
jQuery(jobType).html(jobTypeoutput);

function jobNameFunc(jobN) {
    var jobNameoutput = "<select class='form-select py-3 rounded-0 focus-0'>";
    for (var job in groups[jobN]) {
        jobNameoutput += "<option>" + job + "</option>";
    }
    jobNameoutput += "</select>";
    return jobNameoutput;
}

function jobLocatedFunc(jobN, jobL) {
    var jobLocatedoutput = "<select class='form-select py-3 rounded-0 focus-0'>";
    for (var city in groups[jobN][jobL]) {
        jobLocatedoutput += `<option value='${groups[jobN][jobL][city]}'>` + city + "</option>";
    }
    jobLocatedoutput += "</select>";
    return jobLocatedoutput;
}

var jobTypeVal = jobType.find('select:first-child').val();
var jobNameoutput = jobNameFunc(jobTypeVal);
jQuery(jobName).html(jobNameoutput);

var jobLocateVal = jobName.find('select:first-child').val();
var jobLocatedoutput = jobLocatedFunc(jobTypeVal, jobLocateVal);
jQuery(jobLocated).html(jobLocatedoutput);

jQuery(jobType).on('change', 'select', function() {
    var jobTypeVal = jQuery(this).val();
    var jobNameoutput = jobNameFunc(jobTypeVal);

    jQuery(jobName).html(jobNameoutput);
    var jobLocatedoutput = jobLocatedFunc(jobTypeVal, jobName.find('select option:first-child').text());
    jQuery(jobLocated).html(jobLocatedoutput);

    jQuery(applicationNumber).html(jobLocated.find('select option:first-child').val());
});

jQuery(jobName).on('change', 'select', function() {
    var jobTypeVal = jQuery(jobType).find('select').val();
    var jobNameVal = jQuery(this).val();

    var jobLocatedoutput = jobLocatedFunc(jobTypeVal, jobNameVal);
    jQuery(jobLocated).html(jobLocatedoutput);

    jQuery(applicationNumber).html(jobLocated.find('select option:first-child').val());
});

jQuery(jobLocated).on('change', 'select', function() {
    var jobLocateVal = jQuery(this).val();
    jQuery(applicationNumber).html(jobLocateVal);
});

var jobLocatedFirst = jobLocated.find('select:first-child').val();
var eachCvFirst = eachCv.find('select:first-child').val();

jQuery(applicationNumber).html(jobLocatedFirst);

function timeCalc(appN, cvE) {
    var mins = (appN * cvE) / 60;
    var hours = '';
    if (mins > 60){
        hours = mins / 60;
        hours = Math.floor(hours);
        hoursMin = hours * 60;
        mins = mins - hoursMin;		
    } else {
        mins = mins;
    }
    return { mins: mins, hours: hours };
}

var time = timeCalc(jobLocatedFirst, eachCvFirst);
jQuery(timeSaved).html(`${time.hours} hours, ${time.mins} mins`);

jQuery(eachCv).on('change', 'select', function() {
    var eachCvVal = jQuery(this).val(); 
    var applicationNumberVal = applicationNumber.text();

    var time = timeCalc(eachCvVal, applicationNumberVal);

    if(time.hours == '') {
        jQuery(timeSaved).html(`${time.mins} mins`);
    } else {
        jQuery(timeSaved).html(`${time.hours} hours, ${time.mins} mins`);
    }
    
});
